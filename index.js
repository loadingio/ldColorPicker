function import$(t,e){var o={}.hasOwnProperty;for(var r in e)o.call(e,r)&&(t[r]=e[r]);return t}var cancelAll,ldColorPicker,i;cancelAll=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},ldColorPicker=import$(function(t,e){var o,r,l,i,n,s,c,d=this;return null==e&&(e=null),this.node=t,this.target=e,this.idx=0,o="<div class='ldcp-2d'><div class='ldcp-ptr'></div><img src='gradient.png'><div class='ldcp-mask'></div></div>",r="<div class='ldcp-1d'><div></div><div></div><div class='ldcp-bar'></div><img src='hue.png'><div class='ldcp-mask'></div></div>",l="<div class='ldcp-colors'><div class='ldcp-colorptr'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div></div>",i="<div class='ldcp-functions'><div class='ldcp-btn'></div><div class='ldcp-btn'></div><div class='ldcp-btn'></div><div class='ldcp-btn'></div></div>",n="<span>Link to You Palette</span><input/><div class='ldcp-chooser-btnset'><button>Load</button><button>Cancel</button></div>",t.innerHTML="<div class='ldcp-panel ldcp-picker'>"+o+r+l+i+"</div><div class='ldcp-panel ldcp-chooser'>"+n+"</div>",t.addEventListener("click",function(t){return cancelAll(t)}),s=t.querySelector(".ldcp-2d .ldcp-mask"),s.addEventListener("mousedown",function(){return ldColorPicker.mouse.start(d,2)}),s.addEventListener("click",function(t){return d.move(t,2,!0)}),c=t.querySelector(".ldcp-1d .ldcp-mask"),c.addEventListener("mousedown",function(){return ldColorPicker.mouse.start(d,1)}),c.addEventListener("click",function(t){return d.move(t,1,!0)}),t.querySelector(".ldcp-btn:nth-of-type(1)").addEventListener("click",function(){return d.addColor()}),t.querySelector(".ldcp-btn:nth-of-type(2)").addEventListener("click",function(){return d.removeColor()}),t.querySelector(".ldcp-btn:nth-of-type(3)").addEventListener("click",function(){return d.edit()}),t.querySelector(".ldcp-btn:nth-of-type(4)").addEventListener("click",function(){return d.toggleConfig()}),t.querySelector(".ldcp-chooser button:nth-of-type(1)").addEventListener("click",function(){return d.loadPalette(d.chooser.input.value),d.toggleConfig()}),t.querySelector(".ldcp-chooser button:nth-of-type(2)").addEventListener("click",function(){return d.toggleConfig()}),setTimeout(function(){function e(t){return d.setIdx(t.target.idx)}var o,r,l,i,n;for(d.chooser={panel:t.querySelector(".ldcp-chooser"),input:t.querySelector(".ldcp-chooser input")},d.P2D={ptr:t.querySelector(".ldcp-ptr"),panel:t.querySelector(".ldcp-2d img")},d.P1D={ptr:t.querySelector(".ldcp-bar")},d.colorptr=t.querySelector(".ldcp-colorptr"),d.updateDimension(),d.width=t.offsetWidth,d.height=t.offsetHeight,d.color={nodes:t.querySelectorAll(".ldcp-color"),palette:t.querySelector(".ldcp-colors"),vals:ldColorPicker.palette.getVal(d)},d.color.nodes=function(){var t,e,r=[];for(t=0,e=this.color.nodes.length;e>t;++t)o=t,r.push(this.color.nodes[o]);return r}.call(d),r=0,l=d.color.nodes.length;l>r;++r)i=r,n=d.color.nodes[i],n.idx=i,n.addEventListener("click",e);return n=d.color.vals[d.idx],d.setIdx(d.idx),d.setHsl(n.hue,n.sat,n.lit),d.updatePalette()},0),this},{dom:null,setPalette:function(t){var e,o,r,l;if(t.length){for(e=ldColorPicker.prototype.convert,ldColorPicker.palette.val.splice(0),o=0,r=t.length;r>o;++o)l=t[o],ldColorPicker.palette.val.push(e.color(l));return ldColorPicker.palette.update()}},palette:{members:[],getVal:function(t){return t&&this.members.push(t),this.val},update:function(){var t,e,o,r,l=[];for(t=0,o=(e=this.members).length;o>t;++t)r=e[t],l.push(r.updatePalette());return l},val:function(){var t,e=[];for(t=0;9>t;++t)i=t,e.push({hue:parseInt(360*Math.random()),sat:.5,lit:.5});return e}()},mouse:{start:function(t,e){var o;return o=[["selectstart",function(t){return cancelAll(t)}],["mousemove",function(o){return t.move(o,e)}],["mouseup",function(){return o.map(function(t){return document.removeEventListener(t[0],t[1])}),setTimeout(function(){return t.clickToggler?document.addEventListener("click",t.clickToggler):void 0},0)}]],o.map(function(t){return document.addEventListener(t[0],t[1])}),t.clickToggler?document.removeEventListener("click",t.clickToggler):void 0}},init:function(t,e){var o,r,l,i=[];if(null==e&&(e=null),t)return t._ldcp=new ldColorPicker(t,e);for(o=document.querySelectorAll(".ldColorPicker"),r=0,l=o.length;l>r;++r)t=o[r],i.push(t._ldcp=new ldColorPicker(t));return i},prototype:{loadPalette:function(t){var e,o,r=this;return e=o=new XMLHttpRequest,e.onload=function(){return r.setPalette(JSON.parse(o.responseText))},e.open("GET",t.replace(/palette/,"d/palette"),!0),e.send(),e},addColor:function(){return this.color.vals.length<12?(this.color.vals.splice(0,0,this.random()),this.updatePalette()):void 0},removeColor:function(){return this.color.vals.length>1?(this.color.vals.splice(this.idx,1),this.updatePalette()):void 0},edit:function(){var t,e;return t=function(){var t,o,r,l=[];for(t=0,r=(o=this.color.vals).length;r>t;++t)e=o[t],l.push(this.toHexString(e).replace(/#/,""));return l}.call(this).join(","),window.open("http://localhost/color/?colors="+t)},updateDimension:function(){var t,e,o;return t=[this.node.querySelector(".ldcp-2d"),this.node.querySelector(".ldcp-2d")],e=t[0],o=t[1],t=this.P2D,t.w=e.offsetWidth,t.h=e.offsetHeight,t=this.P1D,t.w=o.offsetWidth,t.h=o.offsetHeight,t},clickToggle:function(){var t=this;return this.clickToggler=function(){return document.removeEventListener("click",t.clickToggler),t.toggle()}},toggleConfig:function(){var t;return"98%"===this.chooser.panel.style.height?(t=this.chooser.panel.style,t.height=0,t):(t=this.chooser.panel.style,t.height="98%",t)},toggle:function(){var t,e,o=this;return"block"===this.node.style.display?this.node.style.display="none":(this.node.style.display="block",document.addEventListener("click",this.clickToggle()),this.updateDimension(),t=this.color.vals.map(function(t,e){return[e,o.toHexString(t)]}).filter(function(t){return t[1]===o.target.value.toLowerCase()})[0],t?this.idx=t[0]:this.color.vals.splice(0,0,this.convert.color(this.target.value)),e=this.color.vals[this.idx],this.setHsl(e.hue,e.sat,e.lit)),ldColorPicker.palette.update()},random:function(){return{hue:360*Math.random(),sat:.5,lit:.5}},setPalette:function(t){var e,o,r,l,i,n;for(o=[],r=0,i=(l=t.colors).length;i>r;++r)n=l[r],o.push(this.convert.color(n.hex));for(e=o,this.color.vals.splice(0),r=0,i=e.length;i>r;++r)n=e[r],this.color.vals.push(n);return ldColorPicker.palette.update()},updatePalette:function(){function t(t){return d.setIdx(t.target.idx)}var e,o,r,l,i,n,s,c,d=this;if(e=[this.color.nodes.length,this.color.vals.length],o=e[0],r=e[1],r>o)for(l=o;r>l;++l)i=l,n=s=document.createElement("div"),n.setAttribute("class","ldcp-color"),n.addEventListener("click",t),n.idx=i,this.color.palette.appendChild(s),this.color.nodes.push(s);else if(o>r){for(l=r;o>l;++l)i=l,this.color.palette.removeChild(this.color.nodes[i]);this.color.nodes.splice(r)}for(l=0;r>l;++l)c=l,this.updateColor(c);return this.idx>=r&&(this.idx=r-1),this.setIdx(this.idx)},updateColor:function(t){var e;return e=this.color.vals[t],this.color.nodes[t].style.background="hsl("+(e.hue||0)+","+(100*e.sat||0)+"%,"+(100*e.lit||0)+"%)"},convert:{color:function(t){var e,o,r,l,i,n,s,c;return/#[a-fA-F0-9]{6}/.exec(t)?(e=parseInt(t.substring(1,3),16)/255,o=parseInt(t.substring(3,5),16)/255,r=parseInt(t.substring(5,7),16)/255,i=this.rgbHsl({r:e,g:o,b:r}),n=i.hue,s=i.sat,c=i.lit,l=i,l):{hue:0,sat:0,lit:0,satV:0,val:0}},rgbHsl:function(t){var e,o,r,l,i,n,s,c,d,a,u,h;return e=t.r,o=t.g,r=t.b,l=Math.max(e,o,r),i=Math.min(e,o,r),n=l-i,s=(l+i)/2,0===n?(c=[0,0],d=c[0],a=c[1]):(d=function(){switch(!1){case l!==e:return 60*((o-r)/n%6);case l!==o:return 60*((r-e)/n+2);case l!==r:return 60*((e-o)/n+4)}}(),a=n/(1-Math.abs(2*s-1)),u=l,h=l-i/u),{hue:d,sat:a,lit:s,satV:h,val:u}}},toRgb:function(t){var e,o,r,l,i,n,s;return e=(1-Math.abs(2*t.lit-1))*t.sat,o=e*(1-Math.abs(t.hue/60%2-1)),r=t.lit-e/2,l=function(){switch(parseInt(t.hue/60)){case 0:return[e,o,0];case 1:return[o,e,0];case 2:return[0,e,o];case 3:return[0,o,e];case 4:return[o,0,e];case 5:return[e,0,o];case 6:return[e,o,0]}}(),i=l[0],n=l[1],s=l[2],l=[i+r,n+r,s+r],i=l[0],n=l[1],s=l[2],l},hex:function(t){var e,o;return t=(e=(o=Math.round(255*t))>0?o:0)<255?e:255,t=t.toString(16),t.length<2?"0"+t:t},toHexString:function(t){var e,o,r,l;return e=this.toRgb(t),o=e[0],r=e[1],l=e[2],"#"+this.hex(o)+this.hex(r)+this.hex(l)},setIdx:function(t){var e;return this.idx=t,e=this.color.vals[t],this.setHsl(e.hue,e.sat,e.lit),this.colorptr.style.left=100*(t+.5)/this.color.nodes.length+"%"},setHsl:function(t,e,o,r){var l,i,n,s,c,d;return null==r&&(r=!1),l=this.color.vals[this.idx],l.hue=t,l.sat=e,l.lit=o,this.P2D.panel.style.backgroundColor=this.toHexString({hue:t,sat:1,lit:.5}),this.target&&(this.target.value=this.toHexString(this.color.vals[this.idx])),r?void 0:(i=(2*o+e*(1-Math.abs(2*o-1)))/2,n=2*(i-o)/i,s=(this.P2D.w*(1-n)+.02*this.P2D.w)/1.04,c=(this.P2D.h*(1-i)+.02*this.P2D.h)/1.04,d=this.P1D.h*(t/360+.02*this.P1D.h)/1.04,this.setPos(2,s,c,!0),this.setPos(1,s,d,!0),this.updateColor(this.idx))},setPos:function(t,e,o,r){var l,i,n,s,c,d,a,u,h,p,v;return null==r&&(r=!1),l=2===t?this.P2D:this.P1D,e=(i=e>0?e:0)<(n=l.w)?i:n,o=(i=o>0?o:0)<(n=l.h)?i:n,l.ptr.style.top=o+"px",2===t&&(l.ptr.style.left=e+"px"),r?void 0:(i=[1.04*e-.02*l.w,1.04*o-.02*l.h],s=i[0],c=i[1],s=(i=(n=s/l.w)>0?n:0)<1?i:1,c=(i=(n=c/l.h)>0?n:0)<1?i:1,d=this.color.vals[this.idx],a=2===t?1-c:(2*d.lit+d.sat*(1-Math.abs(2*d.lit-1)))/2,u=2===t?s:2*(a-d.lit)/a,h=1===t?360*c:d.hue,p=a*(2-u)/2,v=a*u/(1-Math.abs(2*p-1)),this.setHsl(h,v,p,!0),this.updateColor(this.idx))},move:function(t,e,o){var r,l,i,n;return null==o&&(o=!1),t.buttons||o?(r=this.node.getBoundingClientRect(),l=[t.clientY-r.top,t.clientX-r.left],i=l[0],n=l[1],this.setPos(e,n,i),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1):void 0},palette:[]}}),$(document).ready(function(){function t(t){return this._ldcpnode._ldcp.toggle(),cancelAll(t)}var e,o,r,l,i,n,s,c;for(ldColorPicker.init(),e=document.querySelectorAll("*[data-toggle='colorpicker']"),o=0,r=e.length;r>o;++o)l=e[o],l._ldcpnode=i=document.createElement("div"),i.setAttribute("class","ldColorPicker "+l.getAttribute("data-cpclass")+" bottom bubble"),ldColorPicker.init(i,l),document.body.appendChild(i),n=l.offsetTop+l.offsetHeight+10+"px",s=l.offsetLeft+(l.offsetWidth-i.offsetWidth)/2+"px",c=i.style,c.position="absolute",c.display="none",c.top=n,c.left=s,l.addEventListener("click",t);return ldColorPicker.setPalette(["#ac5d53","#e2b955","#f6fcc5","#32b343","#376aa9","#170326"])});