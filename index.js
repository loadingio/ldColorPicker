function import$(t,e){var r={}.hasOwnProperty;for(var o in e)r.call(e,o)&&(t[o]=e[o]);return t}var cancelAll,ldColorPicker,i;cancelAll=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},ldColorPicker=import$(function(t,e){var r,o,i,l,s,n,c=this;return null==e&&(e=null),this.node=t,this.target=e,this.idx=0,r="<div class='ldcp-2d'><div class='ldcp-ptr'></div><div class='ldcp-mask'></div></div>",o="<div class='ldcp-1d'><div></div><div></div><div class='ldcp-bar'></div><div class='ldcp-mask'></div></div>",i="<div class='ldcp-colors'><div class='ldcp-colorptr'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div><div class='ldcp-color'></div></div>",l="<div class='ldcp-palettes'></div>",t.innerHTML="<div class='ldcp-picker'>"+r+o+i+l+"</div>",s=t.querySelector(".ldcp-2d .ldcp-mask"),s.addEventListener("mousedown",function(){return ldColorPicker.mouse.start(c,2)}),s.addEventListener("click",function(t){return c.move(t,2,!0)}),n=t.querySelector(".ldcp-1d .ldcp-mask"),n.addEventListener("mousedown",function(){return ldColorPicker.mouse.start(c,1)}),n.addEventListener("click",function(t){return c.move(t,1,!0)}),setTimeout(function(){function e(t){return c.setIdx(t.target.idx)}var r,o,i,l;for(c.P2D={ptr:t.querySelector(".ldcp-ptr")},c.P1D={ptr:t.querySelector(".ldcp-bar")},c.colorptr=t.querySelector(".ldcp-colorptr"),c.updateDimension(),c.width=t.offsetWidth,c.height=t.offsetHeight,c.color={nodes:t.querySelectorAll(".ldcp-color"),vals:ldColorPicker.palette.getVal(c)},r=0,o=c.color.nodes.length;o>r;++r)i=r,l=c.color.nodes[i],l.idx=i,l.addEventListener("click",e);return l=c.color.vals[c.idx],c.setIdx(c.idx),c.setHsl(l.hue,l.sat,l.lit),c.updatePalette()},0),this},{dom:null,palette:{members:[],getVal:function(t){return t&&this.members.push(t),this.val},update:function(){var t,e,r,o,i=[];for(t=0,r=(e=this.members).length;r>t;++t)o=e[t],i.push(o.updatePalette());return i},val:function(){var t,e=[];for(t=0;9>t;++t)i=t,e.push({hue:parseInt(360*Math.random()),sat:50,lit:50});return e}()},mouse:{start:function(t,e){var r;return r=[["selectstart",function(t){return cancelAll(t)}],["mousemove",function(r){return t.move(r,e)}],["mouseup",function(){return r.map(function(t){return document.removeEventListener(t[0],t[1])}),setTimeout(function(){return t.clickToggler?document.addEventListener("click",t.clickToggler):void 0},0)}]],r.map(function(t){return document.addEventListener(t[0],t[1])}),t.clickToggler?document.removeEventListener("click",t.clickToggler):void 0}},init:function(t,e){var r,o,i,l=[];if(null==e&&(e=null),t)return t._ldcp=new ldColorPicker(t,e);for(r=document.querySelectorAll(".ldColorPicker"),o=0,i=r.length;i>o;++o)t=r[o],l.push(t._ldcp=new ldColorPicker(t));return l},prototype:{updateDimension:function(){var t,e,r;return t=[this.node.querySelector(".ldcp-2d"),this.node.querySelector(".ldcp-2d")],e=t[0],r=t[1],t=this.P2D,t.w=e.offsetWidth,t.h=e.offsetHeight,t=this.P1D,t.w=r.offsetWidth,t.h=r.offsetHeight,t},clickToggle:function(){var t=this;return this.clickToggler=function(){return console.log(t),document.removeEventListener("click",t.clickToggler),t.toggle()}},toggle:function(){var t,e,r=this;return"block"===this.node.style.display?this.node.style.display="none":(this.node.style.display="block",document.addEventListener("click",this.clickToggle()),this.updateDimension(),t=this.color.vals.map(function(t,e){return[e,r.toHexString(t)]}).filter(function(t){return t[1]===r.target.value.toLowerCase()})[0],t?this.idx=t[0]:this.color.vals.splice(0,0,this.convert.color(this.target.value)),e=this.color.vals[this.idx],this.setHsl(e.hue,e.sat,e.lit),ldColorPicker.palette.update())},random:function(){return{hue:360*Math.random(),sat:50,lit:50}},updatePalette:function(){var t,e,r,o=[];for(t=0,e=this.color.nodes.length;e>t;++t)r=t,o.push(this.updateColor(r));return o},updateColor:function(t){var e;return e=this.color.vals[t],this.color.nodes[t].style.background="hsl("+(e.hue||0)+","+(e.sat||0)+"%,"+(e.lit||0)+"%)"},convert:{color:function(t){var e,r,o,i,l,s,n,c;return/#[a-fA-F0-9]{6}/.exec(t)&&(e=parseInt(t.substring(1,3),16)/255,r=parseInt(t.substring(3,5),16)/255,o=parseInt(t.substring(5,7),16)/255,l=this.rgbHsl({r:e,g:r,b:o}),s=l.hue,n=l.sat,c=l.lit,i=l),{hue:0,sat:0,lit:0}},rgbHsl:function(t){var e,r,o,i,l,s,n,c,d,a;return e=t.r,r=t.g,o=t.b,i=Math.max(e,r,o),l=Math.min(e,r,o),s=i-l,n=(i+l)/2,0===s?(c=[0,0],d=c[0],a=c[1]):(d=function(){switch(!1){case i!==e:return 60*((r-o)/s%6);case i!==r:return 60*((o-e)/s+2);case i!==o:return 60*((e-r)/s+4)}}(),a=100*s/(1-Math.abs(2*n-1))),n*=100,{hue:d,sat:a,lit:n}}},toRgb:function(t){var e,r,o,i,l,s,n;return e=(1-Math.abs(2*t.lit/100-1))*t.sat/100,r=e*(1-Math.abs(t.hue/60%2-1)),o=t.lit/100-e/2,i=function(){switch(parseInt(t.hue/60)){case 0:return[e,r,0];case 1:return[r,e,0];case 2:return[0,e,r];case 3:return[0,r,e];case 4:return[r,0,e];case 5:return[e,0,r];case 6:return[e,r,0]}}(),l=i[0],s=i[1],n=i[2],i=[l+o,s+o,n+o],l=i[0],s=i[1],n=i[2],i},hex:function(t){var e,r;return t=(e=(r=Math.round(255*t))>0?r:0)<255?e:255,t=t.toString(16),t.length<2?"0"+t:t},toHexString:function(t){var e,r,o,i;return e=this.toRgb(t),r=e[0],o=e[1],i=e[2],"#"+this.hex(r)+this.hex(o)+this.hex(i)},setIdx:function(t){var e;return this.idx=t,e=this.color.vals[t],this.setHsl(e.hue,e.sat,e.lit),this.colorptr.style.left=100*(t+.5)/this.color.nodes.length+"%"},setHsl:function(t,e,r,o){var i,l,s,n;return null==o&&(o=!1),i=this.color.vals[this.idx],i.hue=t,i.sat=e,i.lit=r,this.target&&(this.target.value=this.toHexString(this.color.vals[this.idx])),o?void 0:(l=(this.P2D.w*t/360+.02*this.P2D.w)/1.04,s=(this.P2D.h*(100-e)/100+.02*this.P2D.h)/1.04,n=(this.P1D.h*(100-r)/100+.02*this.P1D.h)/1.04,this.setPos(2,l,s,!0),this.setPos(1,l,n,!0),this.updateColor(this.idx))},setPos:function(t,e,r,o){var i,l,s,n,c,d,a,u,h;return null==o&&(o=!1),i=2===t?this.P2D:this.P1D,e=(l=e>0?e:0)<(s=i.w)?l:s,r=(l=r>0?r:0)<(s=i.h)?l:s,i.ptr.style.top=r+"px",2===t&&(i.ptr.style.left=e+"px"),o?void 0:(l=[1.04*e-.02*i.w,1.04*r-.02*i.h],n=l[0],c=l[1],n=(l=(s=100*n/i.w)>0?s:0)<100?l:100,c=(l=(s=100*c/i.h)>0?s:0)<100?l:100,d=this.color.vals[this.idx],a=2===t?3.6*n:d.hue,u=2===t?100-c:d.sat,h=1===t?100-c:d.lit,this.setHsl(a,u,h,!0),this.updateColor(this.idx))},move:function(t,e,r){var o,i,l,s;return null==r&&(r=!1),t.buttons||r?(o=this.node.getBoundingClientRect(),i=[t.clientY-o.top,t.clientX-o.left],l=i[0],s=i[1],this.setPos(e,s,l),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1):void 0},palette:[]}}),$(document).ready(function(){function t(t){return this._ldcpnode._ldcp.toggle(),cancelAll(t)}var e,r,o,i,l,s,n,c,d=[];for(ldColorPicker.init(),e=document.querySelectorAll("*[data-toggle='colorpicker']"),r=0,o=e.length;o>r;++r)i=e[r],i._ldcpnode=l=document.createElement("div"),l.setAttribute("class","ldColorPicker "+i.getAttribute("data-cpclass")+" bottom bubble"),ldColorPicker.init(l,i),document.body.appendChild(l),s=i.offsetTop+i.offsetHeight+10+"px",n=i.offsetLeft+(i.offsetWidth-l.offsetWidth)/2+"px",c=l.style,c.position="absolute",c.display="none",c.top=s,c.left=n,d.push(i.addEventListener("click",t));return d});